<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <title><%= htmlWebpackPlugin.options.title %></title>

    <script src="https://cdn.jsdelivr.net/npm/fingerprintjs2@2.1.4/dist/fingerprint2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ua-parser-js@0.7.20/src/ua-parser.min.js"></script>
   
  </head>
  <body>
    <noscript>
      <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
    <script>
     
    function y(e) {
        var i = e[1].replace("canvas fp:data:image/png;base64,", "");
        return function(e) {
            var i, n, t, o = "";
            for (i = 0,
            n = (e += "").length; i < n; i++)
                o += (t = e.charCodeAt(i).toString(16)).length < 2 ? "0" + t : t;
            return o
        }(atob(i).slice(-16, -12))
    };

    let i = new UAParser(window.navigator.userAgent).getResult();

    Fingerprint2.get(function (components) {
        console.log(components);
    // const o1 = components;
    console.log(typeof components);

    var o_comonents = {};``
    components.forEach((function(e) {
        o_comonents[e.key] = e.value
    }
    ));

    const e = o_comonents["webgl"];
    // console.log(e);


    var s, a, c = (s = o_comonents.plugins || o_comonents.regular_plugins || o_comonents.ie_plugins,
        a = [],
        s.forEach((function(e) {
            a.push(e[0])
        }
        )),
        a.join(",")), l = function(e) {
            for (var i = {},n = e.length, t = 0, o = 0; o < n; o++) {
                var r = e[o] || "";
                if (-1 < r.indexOf("webgl unmasked vendor:") ? (i.vendor = r.split("webgl unmasked vendor:")[1],
                t += 1) : -1 < r.indexOf("webgl unmasked renderer:") && (i.renderer = r.split("webgl unmasked renderer:")[1],
                t += 1),
                2 === t)
                    break
            }
            return i;
        }(o_comonents.webgl);

        console.log(i);
    n = {
        screen_resolution: o_comonents.screenResolution.join(","),
        available_screen_resolution: o_comonents.availableScreenResolution.join(","),
        system_version: i.os && i.os.name ? [i.os.name, i.os.version].join(" ") : "unknown",
        brand_model: i.device && i.device.model ? [i.device.type, i.device.vendor, i.device.model].join(" ") : "unknown",
        system_lang: o_comonents.language,
        timezone: o_comonents.timezone,
        timezoneOffset: o_comonents.timezoneOffset,
        list_plugin: c.length > 500 ? c.substr(0, 500).split(",").slice(0, -1).join(",") : c,
        canvas_code: y(o_comonents.canvas),
        webgl_vendor: l.vendor,
        webgl_renderer: l.renderer,
        audio: o_comonents.audio,
        platform: o_comonents.platform
    };
        
    console.log(n);    

    const did = Fingerprint2.x64hash128(Object.keys(n).sort().map((function(e) {return n[e]})).join(""), 31);
    console.log(did);


    }) 
    </script>
  </body>
</html>
